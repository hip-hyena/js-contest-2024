{"version":3,"file":"button-HtigMRvs.js","sources":["../src/helpers/sequentialDom.ts","../src/components/ripple.ts","../src/icons.ts","../src/iconsReverse.ts","../src/components/icon.ts","../src/components/button.ts"],"sourcesContent":["/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {fastRaf} from './schedulers';\nimport deferredPromise, {CancellablePromise} from './cancellablePromise';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport isInDOM from './dom/isInDOM';\n\nclass SequentialDom {\n  private promises: Partial<{\n    read: CancellablePromise<void>,\n    write: CancellablePromise<void>\n  }> = {};\n  private raf = fastRaf.bind(null);\n  private scheduled = false;\n\n  private do(kind: keyof SequentialDom['promises'], callback?: VoidFunction) {\n    let promise = this.promises[kind];\n    if(!promise) {\n      this.scheduleFlush();\n      promise = this.promises[kind] = deferredPromise<void>();\n    }\n\n    if(callback !== undefined) {\n      promise.then(() => callback());\n    }\n\n    return promise;\n  }\n\n  public measure(callback?: VoidFunction) {\n    return this.do('read', callback);\n  }\n\n  public mutate(callback?: VoidFunction) {\n    return this.do('write', callback);\n  }\n\n  /**\n   * Will fire instantly if element is not connected\n   * @param element\n   * @param callback\n   */\n  public mutateElement(element: HTMLElement, callback?: VoidFunction) {\n    const isConnected = isInDOM(element);\n    const promise = isConnected ? this.mutate() : Promise.resolve();\n\n    if(callback !== undefined) {\n      if(!isConnected) {\n        callback();\n      } else {\n        promise.then(() => callback());\n      }\n    }\n\n    return promise;\n  }\n\n  private scheduleFlush() {\n    if(!this.scheduled) {\n      this.scheduled = true;\n\n      this.raf(() => {\n        this.promises.read && this.promises.read.resolve();\n        this.promises.write && this.promises.write.resolve();\n\n        this.scheduled = false;\n        this.promises = {};\n      });\n    }\n  }\n}\n\nconst sequentialDom = new SequentialDom();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.sequentialDom = sequentialDom);\nexport default sequentialDom;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport findUpClassName from '../helpers/dom/findUpClassName';\nimport sequentialDom from '../helpers/sequentialDom';\nimport IS_TOUCH_SUPPORTED from '../environment/touchSupport';\nimport rootScope from '../lib/rootScope';\nimport findUpAsChild from '../helpers/dom/findUpAsChild';\nimport {fastRaf} from '../helpers/schedulers';\nimport liteMode from '../helpers/liteMode';\n\nlet rippleClickId = 0;\nexport default function ripple(\n  elem: HTMLElement,\n  callback: (id: number) => Promise<boolean | void> = () => Promise.resolve(),\n  onEnd: (id: number) => void = null,\n  prepend = false,\n  attachListenerTo = elem\n) {\n  // return;\n  if(elem.querySelector('.c-ripple')) return;\n  elem.classList.add('rp');\n\n  const r = document.createElement('div');\n  r.classList.add('c-ripple');\n\n  const isSquare = elem.classList.contains('rp-square');\n  if(isSquare) {\n    r.classList.add('is-square');\n  }\n\n  elem[prepend ? 'prepend' : 'append'](r);\n\n  let handler: () => void;\n  // let animationEndPromise: Promise<number>;\n  const drawRipple = (clientX: number, clientY: number) => {\n    const startTime = Date.now();\n    const circle = document.createElement('div');\n\n    const clickId = rippleClickId++;\n\n    // console.log('ripple drawRipple');\n\n    // const auto = elem.classList.contains('row-sortable') && !elem.classList.contains('cant-sort');\n    const auto = false;\n    const duration = (auto ? .3 : +window.getComputedStyle(r).getPropertyValue('--ripple-duration').replace('s', '')) * 1000;\n    // console.log('ripple duration', duration);\n\n    const _handler = handler = () => {\n    // handler = () => animationEndPromise.then((duration) => {\n      // console.log('ripple animation was:', duration);\n\n      // const duration = isSquare || mediaSizes.isMobile ? 200 : 700;\n      // return;\n      const elapsedTime = Date.now() - startTime;\n      const cb = () => {\n        // console.log('ripple elapsedTime total pre-remove:', Date.now() - startTime);\n        sequentialDom.mutate(() => {\n          circle.remove();\n        });\n\n        onEnd?.(clickId);\n      };\n      if(elapsedTime < duration) {\n        const delay = Math.max(duration - elapsedTime, duration / 2);\n        setTimeout(() => circle.classList.add('hiding'), Math.max(delay - duration / 2, 0));\n\n        setTimeout(cb, delay);\n      } else {\n        circle.classList.add('hiding');\n        setTimeout(cb, duration / 2);\n      }\n\n      if(!IS_TOUCH_SUPPORTED) {\n        window.removeEventListener('contextmenu', handler);\n        window.removeEventListener('mousemove', handler);\n      }\n\n      handler = null;\n      touchStartFired = false;\n    };\n    // });\n\n    callback?.(clickId);\n\n    /* callback().then((bad) => {\n      if(bad) {\n        span.remove();\n        return;\n      } */\n\n    // console.log('ripple after promise', Date.now() - startTime);\n    // console.log('ripple tooSlow:', tooSlow);\n    /* if(tooSlow) {\n        span.remove();\n        return;\n      } */\n\n    fastRaf(() => {\n      if(_handler !== handler) {\n        return;\n      }\n\n      const rect = r.getBoundingClientRect();\n      circle.classList.add('c-ripple__circle');\n\n      const clickX = clientX - rect.left;\n      const clickY = clientY - rect.top;\n\n      const radius = Math.sqrt((Math.abs(clickY - rect.height / 2) + rect.height / 2) ** 2 + (Math.abs(clickX - rect.width / 2) + rect.width / 2) ** 2);\n      const size = radius;\n\n      // center of circle\n      const x = clickX - size / 2;\n      const y = clickY - size / 2;\n\n      // console.log('ripple click', offsetFromCenter, size, clickX, clickY);\n\n      circle.style.width = circle.style.height = size + 'px';\n      circle.style.left = x + 'px';\n      circle.style.top = y + 'px';\n      circle.style.opacity = '0';\n\n      // нижний код выполняется с задержкой\n      /* animationEndPromise = new Promise((resolve) => {\n          span.addEventListener('animationend', () => {\n            // 713 -> 700\n            resolve(((Date.now() - startTime) / 100 | 0) * 100);\n          }, {once: true});\n        }); */\n\n      // нижний код не всегда включает анимацию ПРИ КЛИКЕ НА ТАЧПАД БЕЗ ТАПТИК ЭНЖИНА\n      /* span.style.display = 'none';\n        r.append(span);\n        duration = +window.getComputedStyle(span).getPropertyValue('animation-duration').replace('s', '') * 1000;\n        span.style.display = ''; */\n\n      r.append(circle);\n\n      void circle.offsetWidth; // force reflow\n      circle.style.opacity = '';\n\n      if(auto) {\n        // window.addEventListener('mousemove', handler, {once: true, passive: true});\n        handler();\n      }\n\n      // r.classList.add('active');\n      // handler();\n    });\n    // });\n  };\n\n  const isRippleUnneeded = (e: Event) => {\n    return e.target !== elem && (\n      ['BUTTON', 'A'].includes((e.target as HTMLElement).tagName) ||\n        findUpClassName(e.target as HTMLElement, 'c-ripple') !== r\n    ) && (\n      attachListenerTo === elem ||\n        !findUpAsChild(e.target as HTMLElement, attachListenerTo)\n    ) && !findUpClassName(e.target, 'checkbox-field');\n  };\n\n  // TODO: rename this variable\n  let touchStartFired = false;\n  if(IS_TOUCH_SUPPORTED) {\n    const touchEnd = () => {\n      handler?.();\n    };\n\n    attachListenerTo.addEventListener('touchstart', (e) => {\n      if(!liteMode.isAvailable('animations')) {\n        return;\n      }\n\n      // console.log('ripple touchstart', e);\n      if(e.touches.length > 1 || touchStartFired || isRippleUnneeded(e)) {\n        return;\n      }\n\n      // console.log('touchstart', e);\n      touchStartFired = true;\n\n      const {clientX, clientY} = e.touches[0];\n      drawRipple(clientX, clientY);\n      attachListenerTo.addEventListener('touchend', touchEnd, {once: true});\n\n      window.addEventListener('touchmove', (e) => {\n        e.cancelBubble = true;\n        e.stopPropagation();\n        touchEnd();\n        attachListenerTo.removeEventListener('touchend', touchEnd);\n      }, {once: true});\n    }, {passive: true});\n  } else {\n    attachListenerTo.addEventListener('mousedown', (e) => {\n      if(![0, 2].includes(e.button)) { // only left and right buttons\n        return;\n      }\n\n      if(!liteMode.isAvailable('animations')) {\n        return;\n      }\n      // console.log('ripple mousedown', e, e.target, findUpClassName(e.target as HTMLElement, 'c-ripple') === r);\n\n      if(attachListenerTo.dataset.ripple === '0' || isRippleUnneeded(e)) {\n        return;\n      } else if(touchStartFired) {\n        touchStartFired = false;\n        return;\n      }\n\n      const {clientX, clientY} = e;\n      drawRipple(clientX, clientY);\n      window.addEventListener('mouseup', handler, {once: true, passive: true});\n      window.addEventListener('contextmenu', handler, {once: true, passive: true});\n    }, {passive: true});\n  }\n}\n","const Icons = {\n  check: 'e900',\n  checks: 'e901',\n  activesessions: 'e902',\n  add: 'e903',\n  add_reaction: 'e904',\n  addboost: 'e905',\n  addmember_filled: 'e906',\n  adduser: 'e907',\n  admin: 'e908',\n  animals: 'e909',\n  animations: 'e90a',\n  archive: 'e90b',\n  arrow_down: 'e90c',\n  arrow_next: 'e90d',\n  arrowcircle: 'e90e',\n  attach: 'e90f',\n  audio_repeat: 'e910',\n  audio_repeat_single: 'e911',\n  author_hidden: 'e912',\n  avatarnext: 'e913',\n  avatarprevious: 'e914',\n  binfilled: 'e915',\n  bold: 'e916',\n  bomb: 'e917',\n  boost: 'e918',\n  boostcircle: 'e919',\n  botcom: 'e91a',\n  bots: 'e91b',\n  bug: 'e91c',\n  calendar: 'e91d',\n  calendarfilter: 'e91e',\n  camera: 'e91f',\n  cameraadd: 'e920',\n  car: 'e921',\n  card: 'e922',\n  card_outline: 'e923',\n  channel: 'e924',\n  channelviews: 'e925',\n  chatspinned: 'e926',\n  chatsplaceholder: 'e927',\n  check1: 'e928',\n  checkbox: 'e929',\n  checkboxblock: 'e92a',\n  checkboxempty: 'e92b',\n  checkboxon: 'e92c',\n  checkretract: 'e92d',\n  checkround: 'e92e',\n  checkround_filled: 'e92f',\n  clock: 'e930',\n  close: 'e931',\n  clouddownload: 'e932',\n  colorize: 'e933',\n  comments: 'e934',\n  commentssticker: 'e935',\n  copy: 'e936',\n  crossround: 'e937',\n  darkmode: 'e938',\n  data: 'e939',\n  delete: 'e93a',\n  delete_filled: 'e93b',\n  deletedaccount: 'e93c',\n  deleteleft: 'e93d',\n  deleteuser: 'e93e',\n  devices: 'e93f',\n  document: 'e940',\n  down: 'e941',\n  download: 'e942',\n  dragfiles: 'e943',\n  dragmedia: 'e944',\n  eats: 'e945',\n  edit: 'e946',\n  email: 'e947',\n  endcall_filled: 'e948',\n  enter: 'e949',\n  eye: 'e94a',\n  eye1: 'e94b',\n  eye2: 'e94c',\n  eyecross_outline: 'e94d',\n  fast_forward: 'e94e',\n  fast_rewind: 'e94f',\n  favourites: 'e950',\n  flag: 'e951',\n  flip: 'e952',\n  folder: 'e953',\n  fontsize: 'e954',\n  forward: 'e955',\n  forward_filled: 'e956',\n  fullscreen: 'e957',\n  gc_microphone: 'e958',\n  gc_microphoneoff: 'e959',\n  gifs: 'e95a',\n  gift: 'e95b',\n  gift_premium: 'e95c',\n  group: 'e95d',\n  group_filled: 'e95e',\n  groupmedia: 'e95f',\n  groupmediaoff: 'e960',\n  hand: 'e961',\n  help: 'e962',\n  hide: 'e963',\n  image: 'e964',\n  info: 'e965',\n  info2: 'e966',\n  italic: 'e967',\n  keyboard: 'e968',\n  lamp: 'e969',\n  language: 'e96a',\n  largepause: 'e96b',\n  largeplay: 'e96c',\n  left: 'e96d',\n  limit_chat: 'e96e',\n  limit_chats: 'e96f',\n  limit_file: 'e970',\n  limit_folders: 'e971',\n  limit_link: 'e972',\n  limit_pin: 'e973',\n  link: 'e974',\n  list: 'e975',\n  listscreenshare: 'e976',\n  livelocation: 'e977',\n  location: 'e978',\n  lock: 'e979',\n  lockoff: 'e97a',\n  loginlogodesktop: 'e97b',\n  loginlogomobile: 'e97c',\n  logout: 'e97d',\n  mediaspoiler: 'e97e',\n  mediaspoileroff: 'e97f',\n  mention: 'e980',\n  menu: 'e981',\n  message: 'e982',\n  message_jump: 'e983',\n  message_quote: 'e984',\n  messageunread: 'e985',\n  microphone: 'e986',\n  microphone_crossed: 'e987',\n  microphone_crossed_filled: 'e988',\n  microphone_filled: 'e989',\n  minus: 'e98a',\n  monospace: 'e98b',\n  more: 'e98c',\n  multistories: 'e98d',\n  mute: 'e98e',\n  muted: 'e98f',\n  mynotes: 'e990',\n  newchannel: 'e991',\n  newchannel_filled: 'e992',\n  newchat_filled: 'e993',\n  newgroup: 'e994',\n  newgroup_filled: 'e995',\n  newprivate: 'e996',\n  newprivate_filled: 'e997',\n  newtab: 'e998',\n  next: 'e999',\n  noncontacts: 'e99a',\n  nosound: 'e99b',\n  online: 'e99c',\n  passwordoff: 'e99d',\n  pause: 'e99e',\n  permissions: 'e99f',\n  phone: 'e9a0',\n  phone_filled: 'e9a1',\n  pin: 'e9a2',\n  pinlist: 'e9a3',\n  pinned_filled: 'e9a4',\n  pinnedchat: 'e9a5',\n  pip: 'e9a6',\n  play: 'e9a7',\n  playback_05: 'e9a8',\n  playback_15: 'e9a9',\n  playback_1x: 'e9aa',\n  playback_2x: 'e9ab',\n  plus: 'e9ac',\n  plusround: 'e9ad',\n  poll: 'e9ae',\n  premium_addone: 'e9af',\n  premium_avatars: 'e9b0',\n  premium_badge: 'e9b1',\n  premium_colors: 'e9b2',\n  premium_double: 'e9b3',\n  premium_emoji: 'e9b4',\n  premium_filesize: 'e9b5',\n  premium_limits: 'e9b6',\n  premium_lock: 'e9b7',\n  premium_management: 'e9b8',\n  premium_noads: 'e9b9',\n  premium_reactions: 'e9ba',\n  premium_speed: 'e9bb',\n  premium_status: 'e9bc',\n  premium_stickers: 'e9bd',\n  premium_transcription: 'e9be',\n  premium_translate: 'e9bf',\n  premium_unlock: 'e9c0',\n  premium_wallpaper: 'e9c1',\n  previous: 'e9c2',\n  promote: 'e9c3',\n  quote: 'e9c4',\n  quote_outline: 'e9c5',\n  radiooff: 'e9c6',\n  radioon: 'e9c7',\n  reactions: 'e9c8',\n  reactions_filled: 'e9c9',\n  readchats: 'e9ca',\n  recent: 'e9cb',\n  replace: 'e9cc',\n  reply: 'e9cd',\n  reply_filled: 'e9ce',\n  restrict: 'e9cf',\n  rightpanel: 'e9d0',\n  rotate_left: 'e9d1',\n  rotate_right: 'e9d2',\n  saved: 'e9d3',\n  savedmessages: 'e9d4',\n  schedule: 'e9d5',\n  scheduled: 'e9d6',\n  search: 'e9d7',\n  select: 'e9d8',\n  send: 'e9d9',\n  send2: 'e9da',\n  sending: 'e9db',\n  sendingerror: 'e9dc',\n  settings: 'e9dd',\n  settings_filled: 'e9de',\n  sharescreen_filled: 'e9df',\n  shipping: 'e9e0',\n  shuffle: 'e9e1',\n  smallscreen: 'e9e2',\n  smile: 'e9e3',\n  speaker: 'e9e4',\n  speakerfilled: 'e9e5',\n  speakeroff: 'e9e6',\n  speakerofffilled: 'e9e7',\n  spoiler: 'e9e8',\n  sport: 'e9e9',\n  star: 'e9ea',\n  star_filled: 'e9eb',\n  statistics: 'e9ec',\n  stickers: 'e9ed',\n  stickers_face: 'e9ee',\n  stop: 'e9ef',\n  stories: 'e9f0',\n  storyreply: 'e9f1',\n  storyrepost: 'e9f2',\n  strikethrough: 'e9f3',\n  textedit: 'e9f4',\n  timer: 'e9f5',\n  tip: 'e9f6',\n  tools: 'e9f7',\n  topics: 'e9f8',\n  transcribe: 'e9f9',\n  unarchive: 'e9fa',\n  underline: 'e9fb',\n  unmute: 'e9fc',\n  unpin: 'e9fd',\n  unread: 'e9fe',\n  up: 'e9ff',\n  user: 'ea00',\n  username: 'ea01',\n  videocamera: 'ea02',\n  videocamera_crossed_filled: 'ea03',\n  videocamera_filled: 'ea04',\n  videochat: 'ea05',\n  volume_down: 'ea06',\n  volume_mute: 'ea07',\n  volume_off: 'ea08',\n  volume_up: 'ea09',\n  webview: 'ea0a',\n  zoomin: 'ea0b',\n  zoomout: 'ea0c'\n};\n\nexport default Icons;\n","const IconsReverse = new Set<Icon>([\n  'avatarnext',\n  'avatarprevious',\n  'arrow_next',\n  'channel',\n  'chatspinned',\n  'fast_forward',\n  'fast_rewind',\n  'forward',\n  'forward_filled',\n  'group',\n  'group_filled',\n  'left',\n  'listscreenshare',\n  'logout',\n  'muted',\n  'newchannel_filled',\n  'newchannel',\n  'newgroup',\n  'newgroup_filled',\n  'next',\n  'nosound',\n  'previous',\n  'send',\n  'send2',\n  'reply',\n  'reply_filled',\n  'sharescreen_filled',\n  'transcribe',\n  'storyreply',\n  'premium_noads',\n  'topics',\n  'pinlist',\n  'deleteleft'\n]);\n\nexport default IconsReverse;\n","import {TGICO_CLASS} from '../helpers/tgico';\nimport Icons from '../icons';\nimport IconsReverse from '../iconsReverse';\nimport I18n from '../lib/langPack';\n\nexport function getIconContent(icon: Icon) {\n  return String.fromCharCode(parseInt(Icons[icon], 16));\n}\n\nexport default function Icon(icon: Icon, ...classes: string[]) {\n  const span = document.createElement('span');\n  if(I18n.isRTL && IconsReverse.has(icon)) {\n    classes.push('icon-reflect');\n  }\n\n  span.classList.add(TGICO_CLASS/* ...tgico(icon) */, ...classes);\n  span.textContent = getIconContent(icon);\n  return span;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {FormatterArguments, i18n, LangPackKey} from '../lib/langPack';\nimport Icon from './icon';\nimport ripple from './ripple';\n\nexport type ButtonOptions = Partial<{\n  noRipple: true,\n  onlyMobile: true,\n  icon: Icon,\n  rippleSquare: true,\n  text: LangPackKey,\n  textArgs?: FormatterArguments,\n  disabled: boolean,\n  asDiv: boolean,\n  asLink: boolean\n}>;\n\nexport default function Button<T extends ButtonOptions>(className: string, options: T = {} as T): T['asLink'] extends true ? HTMLAnchorElement : HTMLButtonElement {\n  const button = document.createElement(options.asLink ? 'a' : (options.asDiv ? 'div' : 'button'));\n  button.className = className;\n\n  if(!options.noRipple) {\n    if(options.rippleSquare) {\n      button.classList.add('rp-square');\n    }\n\n    ripple(button);\n  }\n\n  if(options.icon) {\n    replaceButtonIcon(button, options.icon, false);\n  }\n\n  if(options.onlyMobile) {\n    button.classList.add('only-handhelds');\n  }\n\n  if(options.disabled) {\n    button.setAttribute('disabled', 'true');\n  }\n\n  if(options.text) {\n    button.append(i18n(options.text, options.textArgs));\n  }\n\n  return button as any;\n}\n\nexport function replaceButtonIcon(element: HTMLElement, icon: Icon, oldIcon: Element | false = element.querySelector('.button-icon')) {\n  const newIcon = Icon(icon, 'button-icon');\n  if(oldIcon) oldIcon.replaceWith(newIcon);\n  else element.append(newIcon);\n  return newIcon;\n}\n"],"names":["SequentialDom","fastRaf","kind","callback","promise","deferredPromise","element","isConnected","isInDOM","sequentialDom","MOUNT_CLASS_TO","rippleClickId","ripple","elem","onEnd","prepend","attachListenerTo","r","handler","drawRipple","clientX","clientY","startTime","circle","clickId","duration","_handler","elapsedTime","cb","delay","IS_TOUCH_SUPPORTED","touchStartFired","rect","clickX","clickY","size","x","y","isRippleUnneeded","e","findUpClassName","findUpAsChild","touchEnd","liteMode","Icons","IconsReverse","getIconContent","icon","Icon","classes","span","I18n","TGICO_CLASS","Button","className","options","button","replaceButtonIcon","i18n","oldIcon","newIcon"],"mappings":"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"}